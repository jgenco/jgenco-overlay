--- a/src/core/dart-sass.ts
+++ b/src/core/dart-sass.ts
@@ -15,7 +15,7 @@ import { existsSync } from "fs/mod.ts";
 import { warnOnce } from "./log.ts";
 
 export function dartSassInstallDir() {
-  return toolsPath("dart-sass");
+  return toolsPath("");
 }
 
 export async function dartSassVersion() {
@@ -66,7 +66,7 @@ async function dartCommand(args: string[]) {
     }
 
     const command = Deno.build.os === "windows" ? "sass.bat" : "sass";
-    return toolsPath(join("dart-sass", command));
+    return toolsPath(command);
   };
   const sass = resolvePath();
 
--- a/src/core/devconfig.ts
+++ b/src/core/devconfig.ts
@@ -67,8 +67,7 @@ export function writeDevConfig(config: DevConfig, binPath: string) {
 }
 
 export function readInstalledDevConfig(): DevConfig | null {
-  const binPath = quartoConfig.binPath();
-  const configPath = join(binPath, "..", "config", kDevConfig);
+  const configPath = join(quartoConfig.basePath(), "package","dist", "config", kDevConfig);
   if (existsSync(configPath)) {
     return JSON.parse(Deno.readTextFileSync(configPath)) as DevConfig;
   } else {
--- a/src/core/quarto.ts
+++ b/src/core/quarto.ts
@@ -26,6 +26,7 @@ export interface QuartoConfig {
 let dotenvConfig: DotenvConfig;
 
 export const quartoConfig = {
+  basePath: () => getenv("QUARTO_BASE_PATH"),
   binPath: () => getenv("QUARTO_BIN_PATH"),
   toolsPath: () => join(getenv("QUARTO_BIN_PATH"), "tools"),
   sharePath: () => getenv("QUARTO_SHARE_PATH"),
@@ -67,7 +68,7 @@ export function monitorPreviewTerminationConditions(cleanup?: VoidFunction) {
   // src code change
   if (quartoConfig.isDebug()) {
     const srcDir = Deno.realPathSync(
-      join(quartoConfig.binPath(), "../../../src"),
+      join(quartoConfig.basePath(), "src"),
     );
     const watcher = Deno.watchFs([srcDir], { recursive: true });
     const watchForChanges = async () => {
--- a/src/core/resources.ts
+++ b/src/core/resources.ts
@@ -55,7 +55,7 @@ export function toolsPath(binary: string): string {
     }
   }
 
-  return join(quartoConfig.toolsPath(), binary);
+  return join(quartoConfig.binPath(), binary);
 }
 
 export function pandocBinaryPath(): string {

--- a/src/command/render/render-shared.ts
+++ b/src/command/render/render-shared.ts
@@ -220,7 +220,7 @@ export async function rswURL(port: number, path: string) {
 async function rswPortToken(port: number) {
   const result = await execProcess(
     {
-      cmd: ["/usr/lib/rstudio-server/bin/rserver-url", String(port)],
+      cmd: ["@GENTOO_PORTAGE_EPREFIX@/usr/bin/rserver-url", String(port)],
       stdout: "piped",
       stderr: "piped",
     },
